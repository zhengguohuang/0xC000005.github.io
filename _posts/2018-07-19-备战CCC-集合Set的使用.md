---
layout:     post
title:      å¤‡æˆ˜CCC-é›†åˆSetçš„ä½¿ç”¨
subtitle:   OIer:é€ è½®å­çš„æ­»Coderè¿‡æ¥æŒ¨æ‰“ï¼
date:       2018-07-24
author:     Max
header-img: img/post-bg-rixi18.jpg
catalog: true
tags:
    - C++
    - æ©˜å­æ ‘
    - æ•°å­¦
    - æ»‘é“å¢
---

## å‰è¨€
ä½›äº†ï¼Œä¸Šæ¬¡å†™é¢˜ç›®å› ä¸ºå¤šåŠ äº†ä¸€ä¸ª=çˆ†äº†ä¸ªæ®µé”™è¯¯æ‰¾äº†ä¸€ä¸‹åˆï¼Œ
ä»¥åæç¤ºä¸€ä¸ªå†™åŠ¨æ€æ•°ç»„å¦‚æœå‡ºç°ä»€ä¹ˆæ®µé”™è¯¯çš„æƒ…å†µæŠŠç¨‹åºé‡Œé¢æ‰€æœ‰forçš„=éƒ½ç»™æˆ‘å®‰æ’äº†å°±å¥½äº†ã€å¦‚æœä¸€å®šè¦<=çš„è¯æŠŠå¾ªç¯æ¬¡æ•°-1çœ‹çœ‹æ˜¯ä¸æ˜¯å°±å¯ä»¥è¿è¡Œäº†ã€‘

ä»Šå¤©æ¥ç»§ç»­è‡ªé—­ï¼Œå•Šå‘¸ï¼Œç»§ç»­å­¦ä¹ STLä¸­çš„Seté›†åˆã€æš—ç¤ºäº†STLå¼€æŒ‚ã€‘ï¼Œ
è¿™ä¸å°±æ˜¯Dictå˜›æˆ‘è¯»ä¹¦å°‘ä½ åˆ«éª—æˆ‘ã€äº‹å®ä¸ŠPyçš„åŸºæœ¬è¯­æ³•å¾ˆå¤šå¥½åƒéƒ½å’ŒSTLçš„ç»“æ„ä¸€æ ·ï¼Œå‘æ˜STLçš„äººä¸€å®šæ˜¯ä¸€ä¸ªå¤©æ‰ï¼ã€‘
## 0x01 Why é›†åˆ
é›†åˆçš„å¢™å¤–ç™¾ç§‘ï¼š[ä¼ é€é—¨](https://zh.wikipedia.org/wiki/%E9%9B%86%E5%90%88_(%E6%95%B0%E5%AD%A6))

é›†åˆæ˜¯æ•°å­¦ä¸­çš„ä¸€ä¸ªåŸºæœ¬æ¦‚å¿µï¼Œé€šä¿—åœ°ç†è§£ï¼Œé›†åˆæ˜¯ç”±ä¸€äº›**ä¸é‡å¤**çš„æ•°æ®ç»„æˆçš„ã€‚æ¯”å¦‚ {1,2,3}å°±æ˜¯ä¸€ä¸ªæœ‰ 1,2,3ä¸‰ä¸ªå…ƒç´ çš„é›†åˆã€‚

C++ å’Œ Java çš„æ ‡å‡†åº“ä¸­çš„é›†åˆæ”¯æŒé«˜æ•ˆçš„æ’å…¥ã€åˆ é™¤å’ŒæŸ¥è¯¢æ“ä½œï¼Œè¿™ 3 ä¸ªæ“ä½œçš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯è£¸æ ¹O(lg nï¼‰ï¼Œå…¶ä¸­ næ˜¯å½“å‰é›†åˆä¸­å…ƒç´ çš„ä¸ªæ•°ã€‚å¦‚æœç”¨æ•°ç»„ï¼Œè™½ç„¶æ’å…¥çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ï¼Œä½†æ˜¯åˆ é™¤å’ŒæŸ¥è¯¢éƒ½æ˜¯ O(n)ï¼Œæ—¶é—´æ•ˆç‡å¤ªä½ã€‚
ã€æ¡£ç„¶å•¦åšå¼€å‘çš„æ—¶å€™ç”¨æˆ·ä»æ¥å°±ä¸ç¼ºé‚£ä¹ˆä¸€ç§’ä¸¤ç§’â€”â€”time.sleep(random)ã€‘

ä¸‡å¹¸çš„æ˜¯ï¼ŒSTLå·²ç»ç»™ä½ å†™å¥½äº†Setï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦å†ä½¿ç”¨å¥‡å¥‡æ€ªæ€ªçš„å‘½ä»¤å»è‡ªå·±æ„é€ ä¸€ä¸ªé›†åˆã€å†å†™æŒ‡é’ˆå°±çœŸçš„å†™æˆè‡ªé—­äº†ã€‘

## 0x02 make ä¸ª Set
å¥—è·¯å®‰æ’ä¸Šäº†ï¼Œå¤´æ–‡ä»¶åŠ ä¸Šå°±å®Œäº‹äº†å¥¥
```
#include<set>
```
å› ä¸ºå¥‡æ€ªçš„stdç©ºé—´å±æ€§ï¼Œè®°å¾—åŠ ä¸Šusing namespace stdï¼Œä¸ç„¶ç­‰ä¼šå„¿è°ƒç”¨çš„æ—¶å€™::å†™åˆ°ä½ å“­ï¼Œ
C++ ä¸­ç›´æ¥æ„é€ ä¸€ä¸ªsetçš„è¯­å¥ä¸ºï¼šset<T> sã€‚è¿™æ ·æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸ºsçš„ã€å‚¨å­˜Tç±»å‹æ•°æ®çš„é›†åˆï¼Œå…¶ä¸­Tæ˜¯é›†åˆè¦å‚¨å­˜çš„æ•°æ®ç±»å‹ã€‚åˆå§‹çš„æ—¶å€™sæ˜¯ç©ºé›†åˆã€‚

## 0x03 insertæ’å…¥
C++ ä¸­ç”¨insert()æ–¹æ³•å‘é›†åˆä¸­æ’å…¥ä¸€ä¸ªæ–°çš„å…ƒç´ ã€‚æ³¨æ„å¦‚æœé›†åˆä¸­å·²ç»å­˜åœ¨äº†æŸä¸ªå…ƒç´ ï¼Œå†æ¬¡æ’å…¥ä¸ä¼šäº§ç”Ÿä»»ä½•æ•ˆæœï¼Œé›†åˆä¸­æ˜¯ä¸ä¼šå‡ºç°é‡å¤å…ƒç´ çš„ã€‚
ã€æƒŠäº†ç«Ÿç„¶æ˜¯å»é‡çš„æ•°æ®ç»“æ„ã€‘
```
#include <set>
#include <string>
using namespace std;
int main() {
    set<string> country;  // {}
    country.insert("China"); // {"China"}
    country.insert("America"); // {"China", "America"}
    country.insert("France"); // {"China", "America", "France"}
    return 0;
}
```
å¯¹åº”çš„Pythonä»£ç ï¼Ÿé¡ºä¾¿éªŒè¯äº†ä¸€ä¸‹å»é‡æ€§ï¼š
```
>>> x=set('abcd')
>>> x
{'b', 'a', 'd', 'c'}
>>> x.insert('f')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'set' object has no attribute 'insert'
>>> x.add('f')
>>> x
{'b', 'd', 'f', 'c', 'a'}
>>> x.add('f')
>>> x
{'b', 'd', 'f', 'c', 'a'}
```
è¯è¯´æˆ‘çœ‹åˆ°insertå°±ä¼šå¼ºè¿«ç—‡çš„æƒ³åˆ°Pythonä¸­çš„æ’å…¥æ–¹æ³•ï¼Œäºæ˜¯è·‘åˆ°C++å®˜ç½‘ä¸Šå»ç§‘æ™®äº†ä¸€ä¸‹ï¼Œ
ç­‰ç­‰ï¼Œè¿™é‡Œå°±çŠ¯äº†ä¸€ä¸ªç»å…¸é”™è¯¯ï¼š**setæ˜¯ä¸€ä¸ªæ— åºçš„æ•°æ®ç»“æ„**
æ—¢ç„¶æ— åºå°±ä¸å­˜åœ¨è¯´ä¸‹æ ‡çš„é—®é¢˜ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆsetå’Œmapçš„æ’å…¥æ•ˆç‡æ¯”å…¶ä»–æ‰€æœ‰çš„æ•°æ®ç»“æ„éƒ½å¿«ã€‚

## 0x03 eraseåˆ é™¤
```
#include <set>
#include <string>
using namespace std;
int main() {
    set<string> country;  // {}
    country.insert("China"); // {"China"}
    country.insert("America"); // {"China", "America"}
    country.insert("France"); // {"China", "America", "France"}
    country.erase("America"); // {"China", "France"}
    country.erase("England"); // {"China", "France"}
    return 0;
}
```
è¿™ä¸ªåœ¨vectoré‡Œé¢å·²ç»ä»‹ç»è¿‡äº†ï¼Œå®˜ç½‘ä¸Šå¯¹äºeaseræ˜¯è¿™ä¹ˆä»‹ç»çš„ï¼š
erase(iterator)  ,åˆ é™¤å®šä½å™¨iteratoræŒ‡å‘çš„å€¼
**erase(first,second),åˆ é™¤å®šä½å™¨firstå’Œsecondä¹‹é—´çš„å€¼**
erase(key_value),åˆ é™¤é”®å€¼key_valueçš„å€¼
ç­‰ç­‰ï¼Œä¸æ˜¯è¯´å¥½çš„å˜›ä¸èƒ½æœ‰ä¸‹æ ‡ï¼Ÿï¼Ÿ
æ³¨æ„è¿™é‡Œçš„å«å®šä½å™¨ï¼Œè¿™é‡Œæˆ‘ä»¬åˆè¦å¼•å‡ºä¸Šæ¬¡è¢«æˆ‘æ·¡åŒ–çš„å®šä½å™¨æ¦‚å¿µäº†ï¼š
begin()â€”â€”è¿”å›å®¹å™¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ 
end()â€”â€”è¿”å›å®¹å™¨çš„æœ€åä¸€ä¸ªå…ƒç´ 
**æ³¨æ„ï¼šåœ¨ä½¿ç”¨å®šä½å™¨ä¹‹å‰æœ€å¥½å…ˆæ£€æŸ¥å‡½æ•°æ˜¯å¦ä¸ºç©º**
æ —å­ï¼š
```
#include <iostream>
#include <set>

using namespace std;

int main()
{
    set<int> s;
    set<int>::const_iterator iter;
    set<int>::iterator first;
    set<int>::iterator second;
    for(int i = 1 ; i <= 10 ; ++i)
    {
        s.insert(i);
    }
    //ç¬¬ä¸€ç§åˆ é™¤
    s.erase(s.begin());
    //ç¬¬äºŒç§åˆ é™¤
    first = s.begin();
    second = s.begin();
    second++;
    second++;
    s.erase(first,second);
    //ç¬¬ä¸‰ç§åˆ é™¤
    s.erase(8);
    cout<<"åˆ é™¤å set ä¸­å…ƒç´ æ˜¯ ï¼š";
    for(iter = s.begin() ; iter != s.end() ; ++iter)
    {
        cout<<*iter<<" ";
    }
```

## 0x04 count & find æŸ¥æ‰¾
countç”¨æ¥æŸ¥æ‰¾setä¸­æŸä¸ªæŸä¸ªé”®å€¼å‡ºç°çš„æ¬¡æ•°ã€‚è¿™ä¸ªå‡½æ•°åœ¨setå¹¶ä¸æ˜¯å¾ˆå®ç”¨ï¼Œå› ä¸ºä¸€ä¸ªé”®å€¼åœ¨setåªå¯èƒ½å‡ºç°0æˆ–1æ¬¡ï¼Œè¿™æ ·å°±å˜æˆäº†åˆ¤æ–­æŸä¸€é”®å€¼æ˜¯å¦åœ¨setå‡ºç°è¿‡äº†ã€boolå˜é‡è¿˜è¡Œã€‘
```
#include <set>
#include <string>
#include <stdio.h>
using namespace std;
int main() {
    set<string> country;  // {}
    country.insert("China"); // {"China"}
    country.insert("America"); // {"China", "America"}
    country.insert("France"); // {"China", "America", "France"}
    if (country.count("China")) {
        printf("China belong to country");
    }
    return 0;
}
```
find()  ï¼Œè¿”å›ç»™å®šå€¼å€¼å¾—**å®šä½å™¨**ï¼Œå¦‚æœæ²¡æ‰¾åˆ°åˆ™è¿”å›end()ã€‚
åˆæåˆ°è¿­ä»£å™¨äº†ï¼Œä¸€ä¼šå„¿ä¼šè®²ï¼Œå…ˆè®°ä½æ€ä¹ˆå†™å°±å®Œäº‹å’¯ï¼Œæ¯•ç«Ÿseté‡Œé¢åªæœ‰è¿™ä¸€ç§è¿­ä»£æ–¹å¼ï¼Œ
```
#include <iostream>
#include <set>

using namespace std;

int main()
{
    int a[] = {1,2,3};
    set<int> s(a,a+3);
    set<int>::iterator iter;
    if((iter = s.find(2)) != s.end())
    {
        cout<<*iter<<endl;
    }
    return 0;
}
```

## 0x05 iterator è¿­ä»£å™¨
è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥‡æ€ªçš„ä¸œè¥¿ï¼Œä½¿ç”¨è‡ªé—­çš„æŒ‡ç¤ºå™¨å’ŒæŒ‡é’ˆè¿›è¡Œè¿­ä»£ã€æŒ‡é’ˆé‡Œå°±æ‘‡äº†æˆ‘å§ã€‘
ä¸‹é¢å°±æ˜¯ä¸€ä¸ªéå¸¸å…¸å‹çš„è¿­ä»£å™¨ï¼š
```
#include <set>
#include <string>
#include <iostream>
using namespace std;
int main() {
    set<string> country;  // {}
    country.insert("China"); // {"China"}
    country.insert("America"); // {"China", "America"}
    country.insert("France"); // {"China", "America", "France"}
    for (set<string>::iterator it = country.begin(); it != country.end(); ++it) {
        cout << (*it) << endl;
    }
    return 0;
}
```
çœ‹åˆ°æ²¡æœ‰ï¼Ÿbeginå’Œendå®‰æ’ä¸Šäº†ï¼Œä½†æ˜¯setæœ‰ä¸€ä¸ªç‰¹åˆ«ğŸ®ğŸºçš„åŠŸèƒ½â€”â€”C++çš„é›†åˆéå†å‡ºæ¥æ˜¯ä»å°åˆ°å¤§è¿›è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´......
ä»–ç»™å¸®ä½ æ’åºå•¦ï¼Œè¿™ä¹Ÿå¤ªæ£’äº†â‘§

## 0x06 clear æ¸…ç©º
å’Œvectorä¸€æ ·ï¼Œsetä¹Ÿæ˜¯åªéœ€è¦ä½¿ç”¨clearä¾¿å¯ä»¥æ¸…ç©ºæ‰€æœ‰å…ƒç´ å””ã€è¿­ä»£å™¨æ˜¯æŒ‡é’ˆæ€ä¹ˆé‡Šæ”¾å•ä¸ªï¼Ÿï¼Ÿã€‘

## 0x07 å…¶ä»–éªšæ“ä½œ
max_size() |è¿”å›setå®¹å™¨å¯èƒ½åŒ…å«çš„å…ƒç´ æœ€å¤§ä¸ªæ•°
--|--
size()|è¿”å›å½“å‰setå®¹å™¨ä¸­çš„å…ƒç´ ä¸ªæ•°
rbegin | è¿”å›çš„å€¼å’Œend()ç›¸åŒ
rend()|è¿”å›çš„å€¼å’Œrbegin()ç›¸åŒ
lower_bound(key_value) |è¿”å›ç¬¬ä¸€ä¸ªå¤§äºç­‰äºkey_valueçš„å®šä½å™¨
upper_bound(key_value)|è¿”å›æœ€åä¸€ä¸ªå¤§äºç­‰äºkey_valueçš„å®šä½å™¨

æ —å­lower&upperï¼š
```
#include <iostream>
#include <set>

using namespace std;

int main()
{
    set<int> s;
    s.insert(1);
    s.insert(3);
    s.insert(4);
    cout<<*s.lower_bound(2)<<endl;
    cout<<*s.lower_bound(3)<<endl;
    cout<<*s.upper_bound(3)<<endl;
    return 0;
}

è¾“å‡º:
3
3
4
```

## åè®°
å‚è€ƒèµ„æ–™ï¼š
[é›†åˆ-è®¡è’œå®¢](https://www.jisuanke.com/minicourse/734/37688)
[STLä¸­çš„setå®¹å™¨çš„ä¸€ç‚¹æ€»ç»“](https://www.cnblogs.com/BeyondAnyTime/archive/2012/08/13/2636375.html)
std::[set](http://www.cplusplus.com/reference/set/set/)::find

æ‹–å°±å®Œäº‹å’¯~
ã€æ˜å¹´äºŒæœˆæ€•ä¸æ˜¯è¦è¢«æ‰“ã€‘
OIer:å†™è½®å­Coderçš„è¿‡æ¥æŒ¨æ‰“ï¼

## æœ€åçš„æœ€å
[ç ´ç«™ä¸€ä¸ªæš‘å‡æ²¡äººæ¥å•¦ï¼Œæˆ‘å“­äº†ï¼Œä½ ä»¬å‘¢ï¼Ÿ](https://0xc000005.github.io/)
è°·æ­Œç»Ÿè®¡ä¸çœ‹äº†ï¼Œä¼¤å¿ƒ